var sl=SLib={};try{module.exports=sl}catch(e){console.log(e)};sl.eagleMysql=function(){this.mysql=null,this.client=null,this.dbConfig=null;var e={};return e.debug=!1,e.init=function(t){e.debug&&console.log("[init eagleMysql]: "+t),this.mysql=require("mysql"),this.dbConfig=t},e.createTables=function(t){for(var n=0,r=t.length;n<r;++n){var i=t[n].Name,s=t[n].Fields,u="CREATE TABLE if not exists "+i+"(ID INT(11) not null AUTO_INCREMENT, ";for(var a=0,f=s.length;a<f;++a)u+=s[a].key+" "+s[a].type+", ";u+="PRIMARY KEY (id))",e.debug&&console.log("[createTables]: "+u),this.client.query(u)}},e.insert=function(t,n){var r=" "+t.keys[0]+"=? ";for(var i=1,s=t.keys.length;i<s;++i)r+=", "+t.keys[i]+"=? ";e.debug&&console.log("[insert]: INSERT INTO "+t.table+" SET "+r),this.client.query("INSERT INTO "+t.table+" SET "+r,t.values,function(t,r,i){e._doCallback(t,r,i,n)})},e.delete=function(t,n){e.debug&&console.log("[delete]: DELETE FROM "+t.table+" "+t.conditions),this.client.query("DELETE FROM "+t.table+" "+t.conditions,function(t,r,i){e._doCallback(t,r,i,n)})},e.update=function(t,n){var r=" "+t.keys[0]+"=? ";for(var i=1,s=t.keys.length;i<s;++i)r+=", "+t.keys[i]+"=? ";e.debug&&console.log("[update]: UPDATE "+t.table+" SET "+r+" "+t.conditions),this.client.query("UPDATE "+t.table+" SET "+r+" "+t.conditions,t.values,function(t,r,i){e._doCallback(t,r,i,n)})},e.select=function(t,n){var r=" "+t.keys[0]+" ";for(var i=1,s=t.keys.length;i<s;++i)r+=", "+t.keys[i]+" ";e.debug&&console.log("[update]: SELECT "+r+" FROM "+t.table+" "+t.conditions),this.client.query("SELECT "+r+" FROM "+t.table+" "+t.conditions,function(t,r,i){e._doCallback(t,r,i,n)})},e.connet=function(){this.client=this.mysql.createConnection(this.dbConfig.dbOptions),e.debug&&console.log("[connet]: USE "+this.dbConfig.dataBase),this.client.query("USE "+this.dbConfig.dataBase,function(e,t){if(e){console.log("ClientConnectionReady Error: "+e.message);return}console.log("ClientConnect Success")})},e.disconnet=function(){this.client.end(),this.client=null},e._doCallback=function(e,t,n,r){e?r.error(e):(data={results:t,fields:n},r.success(data))},e}();sl.log=function(){var e={},t=0;return e.d=e.debug=function(e){t<=sl.log_mode.DEBUG&&console.log("%c [DEBUG] "+e+" ","background: #222; color: white")},e.i=e.info=function(e){t<=sl.log_mode.INFO&&console.log("%c [INFO] "+e+" ","background: #222; color: #bada55")},e.w=e.warn=function(e){t<=sl.log_mode.WARN&&console.log("%c [WARN] "+e+" ","background: #222; color: orange")},e.e=e.error=function(e){t<=sl.log_mode.ERROR&&console.log("%c [ERROR] "+e+" ","background: #222; color: red")},e.setMode=function(e){t=e},e}();sl.sqlCondition=function(){var e=e||"";this.where=function(t){return e+=" where "+t,this},this.and=function(t){return e+=" and "+t,this},this.or=function(t){return e+=" or "+t,this},this.getSql=function(){return e}};sl.log_mode=function(){var e={};return e.DEBUG=0,e.INFO=1,e.WARN=2,e.ERROR=3,e}();sl.extendBase={Config:{Object:"Object",Array:"Array",String:"String"},getType:function(e){var t=Object.prototype.toString.call(e);return t=t.substring(t.indexOf(" ")+1,t.indexOf("]")),t==undefined&&console.log("[错误] getType 参数类型错误"),t}};sl.string=function(){var e={trim:/(^\s*)|(\s*$)/g,androidVersion:/^Android+\s+\d+/i,email:/^[a-zA-Z0-9_\-]{1,}@[a-zA-Z0-9_\-]{1,}\.[a-zA-Z0-9_\-.]{1,}$/,post:/^\d{6}$/},t=function(e){this.string=e};return t.prototype={initialsToUpper:function(){return this.string.substring(0,1).toUpperCase().concat(this.string.substring(1))},isContain:function(e){return sl.extendBase.getType(e)==sl.extendBase.Config.String&&e.length!=1?(console.log("[错误] sl.string.isContain 参数类型错误"),!1):this.string.indexOf(e)>-1?!0:!1},isEmail:function(){return e.email.test(this.string.trim())}},function(e){if(sl.extendBase.getType(e)!=sl.extendBase.Config.String)console.log("[错误] sl.string 参数类型错误");else{if(e!="")return new t(e);console.log("[错误] sl.string 长度为 0")}}}();sl.object=function(){var e=function(e){this.object=e};return e.prototype={equalsTo:function(e){var t=!0;for(var n in this.object){var r=sl.extendBase.getType(this.object[n]),i=sl.extendBase.getType(e[n]);r!=i?t=!1:r==sl.extendBase.Config.Array?t=sl.array(this.object[n]).equalsTo(e[n]):r==sl.extendBase.Config.Object?t=sl.object(this.object[n]).equalsTo(e[n]):t=e[n]==this.object[n];if(!t)break}return t},isContainKey:function(e){var t=!1;for(var n in this.object)n==e&&(t=!0);return t},toString:function(){var e="{";for(var t in this.object){var n=sl.extendBase.getType(this.object[t]);n==sl.extendBase.Config.Object?e+=t+":"+sl.object(this.object[t]).toString():n==sl.extendBase.Config.Array?e+=t+":"+sl.array(this.object[t]).toString():e+=t+":"+this.object[t],e+=", "}return e.length>1?e=e.substr(0,e.lastIndexOf(","))+"}":e+="}",e},clone:function(){var e={};for(var t in this.object){var n=sl.extendBase.getType(this.object[t]);n=="Object"?e[t]=sl.object(this.object[t]).clone():n=="Array"?e[t]=sl.array(this.object[t]).clone():e[t]=this.object[t]}return e}},function(t){if(sl.extendBase.getType(t)==sl.extendBase.Config.Object)return new e(t);console.log("[错误] sl.object 参数类型错误")}}();sl.array=function(){var e=function(e){this.array=e};return e.prototype={qRemoveByIndex:function(e){if(!(e<0||e>=this.array.length)){var t=this.array.length-1,n=this.array[e];return this.array[e]=this.array[t],this.array[t]=n,this.array.pop(),this.array}console.log("[错误] qRemoveByIndex 参数越界")},cRemoveByIndex:function(e){if(e<0||e>=this.array.length)console.log("[错误] cRemoveByIndex 参数越界");else{for(var t=e;t<this.array.length;++t)this.array[t]=this.array[t+1];this.array.pop()}return this.array},random:function(){var e=Math.floor(Math.random()*this.array.length);return this.array[e]},equalsTo:function(e){var t=!0;for(var n=0,r=this.array.length;n<r;++n){var i=sl.extendBase.getType(this.array[n]),s=sl.extendBase.getType(e[n]);i!=s?t=!1:i==sl.extendBase.Config.Array?t=sl.array(this.array[n]).equalsTo(e[n]):i==sl.extendBase.Config.Object?t=sl.object(this.array[n]).equalsTo(e[n]):t=e[n]==this.array[n];if(!t)break}return t},isContain:function(e){var t=!1,n=sl.extendBase.getType(e);for(var r=0,i=this.array.length;r<i;++r){var s=sl.extendBase.getType(this.array[r]);if(s!=n)continue;s==sl.extendBase.Config.Array?t=sl.array(this.array[r]).equalsTo(e):s==sl.extendBase.Config.Object?t=sl.object(this.array[r]).equalsTo(e):t=this.array.indexOf(e)!=-1;if(t)break}return t},toString:function(){var e="[";return this.array.map(function(t){var n=sl.extendBase.getType(t);n==sl.extendBase.Config.Object?e+=sl.object(t).toString():n==sl.extendBase.Config.Array?e+=sl.array(t).toString():e+=t,e+=", "}),e.length>1?e=e.substr(0,e.lastIndexOf(","))+"]":e+="]",e},clone:function(){var e=[];return this.array.map(function(t){var n=sl.extendBase.getType(t);n==sl.extendBase.Config.Object?e.push(sl.object(t).clone()):n==sl.extendBase.Config.Array?e.push(sl.array(t).clone()):e.push(t)}),e}},function(t){if(sl.extendBase.getType(t)==sl.extendBase.Config.Array)return new e(t);console.log("[错误] sl.array 参数类型错误")}}();